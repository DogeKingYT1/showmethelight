module.exports=[2712,a=>{"use strict";var b=a.i(9168),c=a.i(7068),d=a.i(2759),e=a.i(3590),f=a.i(7342),g=a.i(8171),h=a.i(7669);function i(){let[a,b]=(0,h.useState)(!1),[c,d]=(0,h.useState)(null);async function e(a){a.preventDefault();let c=a.target.password.value,d=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:c})});if(d.ok){let a=await d.json();localStorage.setItem("smtl_token",a.token),b(!0)}else alert("Login failed")}async function f(a){a.preventDefault(),alert("not authed")}async function i(a){confirm("Delete?")&&((await fetch("/api/deletePost",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer null"},body:JSON.stringify({id:a})})).ok?d(b=>b.filter(b=>b.id!==a)):alert("delete failed"))}return(0,h.useEffect)(()=>{fetch("/api/posts").then(a=>a.ok?a.json():[]).then(d).catch(()=>d([]))},[]),(0,g.jsxs)("div",{children:[(0,g.jsx)("header",{className:"site-header",children:(0,g.jsx)("div",{className:"container",children:(0,g.jsx)("h1",{children:"Admin"})})}),(0,g.jsxs)("main",{className:"container",children:[!a&&(0,g.jsxs)("section",{children:[(0,g.jsx)("h2",{children:"Login"}),(0,g.jsxs)("form",{onSubmit:e,className:"login-form",children:[(0,g.jsx)("label",{children:"Password"}),(0,g.jsx)("input",{name:"password",type:"password"}),(0,g.jsx)("button",{children:"Login"})]})]}),a&&(0,g.jsxs)("section",{children:[(0,g.jsx)("h2",{children:"Create post"}),(0,g.jsxs)("form",{onSubmit:f,className:"create-form",children:[(0,g.jsx)("label",{children:"Title"}),(0,g.jsx)("input",{name:"title"}),(0,g.jsx)("label",{children:"Content"}),(0,g.jsx)("textarea",{name:"content",rows:6}),(0,g.jsx)("label",{children:"Tags (comma separated)"}),(0,g.jsx)("input",{name:"tags"}),(0,g.jsx)("button",{children:"Create"})]}),(0,g.jsx)("h3",{style:{marginTop:18},children:"Existing posts"}),(0,g.jsxs)("div",{className:"post-list",children:[!c&&"Loading...",c&&c.map(a=>(0,g.jsxs)("div",{className:"post-card",children:[(0,g.jsxs)("h3",{children:[a.title," ",(0,g.jsx)("button",{onClick:()=>i(a.id),style:{float:"right"},children:"Delete"})]}),(0,g.jsx)("p",{className:"muted",children:a.created_at}),(0,g.jsx)("p",{children:(a.content||"").slice(0,300)})]},a.id))]})]})]})]})}a.s(["default",()=>i],1392);var j=a.i(1392),k=a.i(9193);let l=(0,d.hoist)(j,"default"),m=(0,d.hoist)(j,"getStaticProps"),n=(0,d.hoist)(j,"getStaticPaths"),o=(0,d.hoist)(j,"getServerSideProps"),p=(0,d.hoist)(j,"config"),q=(0,d.hoist)(j,"reportWebVitals"),r=(0,d.hoist)(j,"unstable_getStaticProps"),s=(0,d.hoist)(j,"unstable_getStaticPaths"),t=(0,d.hoist)(j,"unstable_getStaticParams"),u=(0,d.hoist)(j,"unstable_getServerProps"),v=(0,d.hoist)(j,"unstable_getServerSideProps"),w=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/admin/index",pathname:"/admin",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:j}),x=(0,k.getHandler)({srcPage:"/admin/index",config:p,userland:j,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r],2712)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_pages_db102030.js.map